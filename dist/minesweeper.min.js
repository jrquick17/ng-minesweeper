!function(){"use strict";angular.module("minesweeper",[])}(),function(){"use strict";function e(){var e=this;return e.reset=function(){},e.reset(),e}angular.module("minesweeper").service("MinesweeperService",e),e.$inject=[]}(),function(){"use strict";function e(e,o){var s=this;s.DEFAULT_COLS=5,s.DEFAULT_ROWS=5,s.MAX_COLS=144,s.MAX_ROWS=144,e.$watch("minePercent",function(e){s.minePercent=s.get(e,.15)}),e.$watch("cols",function(e){s.cols=s.get(e,s.DEFAULT_COLS),s.cols>s.MAX_COLS&&(s.cols=s.MAX_COLS)}),e.$watch("rows",function(e){s.rows=s.get(e,s.DEFAULT_ROWS),s.cols>s.MAX_ROWS&&(s.cols=s.MAX_ROWS),s.buildBoard()}),s.buildBoard=function(){s.cells=[],s.cellCount=s.cols*s.rows;for(var e=0;e<s.cellCount;e++){var o={hasFlag:!1};o.hasMine=Math.random()<=s.minePercent,o.isUnknown=!0;var l=e%s.cols,c=Math.floor(e/s.cols);o.col=l,o.row=c,0===l&&(s.cells[c]=[]),s.cells[c][l]=o}for(var t=0;t<s.rows;t++)for(var n=0;n<s.cols;n++)s.cells[t][n].touches=s.countTouches(s.cells[t][n])},s.clearNeighbors=function(e){for(var o=s.getNeighbors(e),l=o.length,c=0;c<l;c++){var t=o[c];t.isUnknown&&!t.hasMine&&s.clearCell(t)}},s.clearCell=function(e){e.hasFlag||(e.isUnknown=!1,e.hasMine||0===e.touches&&s.clearNeighbors(e))},s.click=function(e,o){1===e.which?s.clearCell(o):3===e.which&&s.setFlag(o)},s.countTouches=function(e){for(var o=0,l=s.getNeighbors(e),c=l.length,t=0;t<c;t++){var n=l[t];n.hasMine&&o++}return o},s.get=function(e,o){var l=null;void 0===e&&void 0!==o&&(l=o);return l},s.getNeighbors=function(e){for(var o=[],l=["getNeighborBottom","getNeighborBottomLeft","getNeighborBottomRight","getNeighborLeft","getNeighborRight","getNeighborTop","getNeighborTopLeft","getNeighborTopRight"],c=l.length,t=0;t<c;t++){var n=l[t],r=s[n](e);null!==r&&o.push(r)}return o},s.getNeighborBottom=function(e){if(e.row+1!==s.rows)return s.cells[e.row+1][e.col];return null},s.getNeighborBottomLeft=function(e){return 0!==e.col&&e.row+1!==s.rows&&s.cells[e.row+1][e.col-1]},s.getNeighborBottomRight=function(e){return e.col+1!==s.cols&&e.row+1!==s.rows&&s.cells[e.row+1][e.col+1]},s.getNeighborLeft=function(e){return 0!==e.col&&s.cells[e.row][e.col-1]},s.getNeighborRight=function(e){return e.col+1!==s.cols&&s.cells[e.row][e.col+1]},s.getNeighborTop=function(e){return 0!==e.row&&s.cells[e.row-1][e.col]},s.getNeighborTopLeft=function(e){return 0!==e.col&&0!==e.row&&s.cells[e.row-1][e.col-1]},s.getNeighborTopRight=function(e){return e.col+1!==s.cols&&0!==e.row&&s.cells[e.row-1][e.col+1]},s.setFlag=function(e){e.isUnknown&&(e.hasFlag=!e.hasFlag)},s.reset=function(){},s.init=function(){s.reset()},s.init()}angular.module("minesweeper").controller("MinesweeperController",e),e.$inject=["$scope","MinesweeperService"]}(),function(){"use strict";angular.module("minesweeper").directive("minesweeper",function(){return{controller:"MinesweeperController",controllerAs:"ctrl",restrict:"E",scope:{cols:"=",minePercent:"=",rows:"="},template:"<div class=\"row\" data-ng-repeat=\"cols in ctrl.cells\"><div data-ng-repeat=\"cell in cols\" class=\"col cell\" data-ng-class=\"{ 'clear': !cell.isUnknown && !cell.hasMine && cell.touches === 0, 'mine': !cell.isUnknown && cell.hasMine, 'safe': !cell.isUnknown && !cell.hasMine && cell.touches !== 0, 'flag': cell.isUnknown && cell.hasFlag, 'unknown': cell.isUnknown && !cell.hasFlag, 'touches-0': cell.touches === 0, 'touches-1': cell.touches === 1, 'touches-2': cell.touches === 2, 'touches-3': cell.touches === 3, 'touches-4': cell.touches === 4, 'touches-5': cell.touches === 5, 'touches-6': cell.touches === 6, 'touches-7': cell.touches === 7, 'touches-8': cell.touches === 8 }\" data-ng-mousedown=\"ctrl.click($event, cell)\" oncontextmenu=\"return false\"><p data-ng-if=\"cell.isUnknown\">~</p><p data-ng-if=\"!cell.isUnknown\">{{ cell.hasMine ? 'X' : cell.touches }}</p></div></div>"}})}();
//# sourceMappingURL=minesweeper.min.js.map
