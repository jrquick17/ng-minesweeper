!function(){"use strict";angular.module("minesweeper",[])}(),function(){"use strict";function e(){var e=this;return e.reset=function(){},e.reset(),e}angular.module("minesweeper").service("MinesweeperService",e),e.$inject=[]}(),function(){"use strict";function e(e,o){var i=this;i.DEFAULT_COLS=10,i.DEFAULT_ROWS=6,i.MIN_COLS=3,i.MIN_ROWS=3,i.MAX_COLS=48,i.MAX_ROWS=48,i.mineCount=0,e.$watch("minePercent",function(e){i.minePercent=i.get(e,.12)}),e.$watch("cols",function(e){i.cols=i.get(e,i.DEFAULT_COLS)}),e.$watch("rows",function(e){i.rows=i.get(e,i.DEFAULT_ROWS),i.buildBoard()}),e.$watch("unlimitedFlags",function(e){i.unlimitedFlags=i.get(e,!1)}),i.buildBoard=function(){i.checkColsAndRows(),i.cells=[];for(var e=0;e<i.rows;e++){i.cells[e]=[];for(var o=0;o<i.cols;o++){var r={hasFlag:!1};r.hasMine=Math.random()<=i.minePercent,r.hasMine&&i.mineCount++,r.isClear=!1,r.col=o,r.row=e,i.cells[e][o]=r}}for(var t=0;t<i.rows;t++)for(var n=0;n<i.cols;n++)i.cells[t][n].touches=i.countTouches(i.cells[t][n])},i.checkColsAndRows=function(){i.cols>i.MAX_COLS?i.cols=i.MAX_COLS:i.cols<i.MIN_COLS&&(i.cols=i.MIN_COLS);i.rows>i.MAX_ROWS?i.rows=i.MAX_ROWS:i.rows<i.MIN_ROWS&&(i.rows=i.MIN_ROWS)},i.checkEnd=function(){for(var e=0;e<i.rows;e++)for(var o=0;o<i.cols;o++)if(!i.cells[e][o].isClear){if(!i.cells[e][o].hasFlag)return!1;if(!i.cells[e][o].hasMine)return!1}return!0},i.clearNeighbors=function(e){for(var o=i.getNeighbors(e),r=o.length,t=0;t<r;t++){var n=o[t];n.isClear||n.hasMine||i.clearCell(n)}},i.clearCell=function(e){e.hasFlag||(e.isClear=!0,e.hasMine?(i.showMessage("BOOM!","Game Over"),i.gameover=!0):0===e.touches&&i.clearNeighbors(e))},i.click=function(e,o){if(!i.gameover){1===e.which?i.clearCell(o):3===e.which&&i.setFlag(o);var r=i.checkEnd();r&&(i.showMessage("Good game.","Game Over"),i.gameover=!0)}},i.closeModal=function(){$("#modal").modal("hide")},i.countTouches=function(e){for(var o=0,r=i.getNeighbors(e),t=r.length,n=0;n<t;n++){var l=r[n];l.hasMine&&o++}return o},i.get=function(e,o){var r=null;void 0===e&&void 0!==o&&(r=o);return r},i.getNeighbors=function(e){for(var o=[],r=["getNeighborBottom","getNeighborBottomLeft","getNeighborBottomRight","getNeighborLeft","getNeighborRight","getNeighborTop","getNeighborTopLeft","getNeighborTopRight"],t=r.length,n=0;n<t;n++){var l=r[n],s=i[l](e);null!==s&&o.push(s)}return o},i.getNeighborBottom=function(e){if(e.row+1!==i.rows)return i.cells[e.row+1][e.col];return null},i.getNeighborBottomLeft=function(e){if(0!==e.col&&e.row+1!==i.rows)return i.cells[e.row+1][e.col-1];return null},i.getNeighborBottomRight=function(e){if(e.col+1!==i.cols&&e.row+1!==i.rows)return i.cells[e.row+1][e.col+1];return null},i.getNeighborLeft=function(e){if(0!==e.col)return i.cells[e.row][e.col-1];return null},i.getNeighborRight=function(e){if(e.col+1!==i.cols)return i.cells[e.row][e.col+1];return null},i.getNeighborTop=function(e){if(0!==e.row)return i.cells[e.row-1][e.col];return null},i.getNeighborTopLeft=function(e){if(0!==e.col&&0!==e.row)return i.cells[e.row-1][e.col-1];return null},i.getNeighborTopRight=function(e){if(e.col+1!==i.cols&&0!==e.row)return i.cells[e.row-1][e.col+1];return null},i.restart=function(){i.reset(),i.buildBoard()},i.setFlag=function(e){i.unlimitedFlags||i.flagsUsed<i.mineCount?e.isClear||(e.hasFlag?(e.hasFlag=!1,i.flagsUsed--):(e.hasFlag=!0,i.flagsUsed++)):i.showMessage("No more flags left.")},i.showMessage=function(e,o){i.message=e,i.title=i.get(o,"Message"),$("#modal").modal("show")},i.toggleSettings=function(){i.showSettings=!i.showSettings},i.reset=function(){i.flagsUsed=0,i.gameover=!1,i.message="",i.mustRestart=!1,i.showSettings=!1,i.title=""},i.init=function(){i.reset()},i.init()}angular.module("minesweeper").controller("MinesweeperController",e),e.$inject=["$scope","MinesweeperService"]}();
//# sourceMappingURL=minesweeper.min.js.map
