!function(){"use strict";angular.module("minesweeper",[])}(),function(){"use strict";function e(){var e=this;return e.reset=function(){},e.reset(),e}angular.module("minesweeper").service("MinesweeperService",e),e.$inject=[]}(),function(){"use strict";function e(e,l){var t=this;t.DEFAULT_COLS=5,t.DEFAULT_ROWS=5,t.MAX_COLS=144,t.MAX_ROWS=144,e.$watch("minePercent",function(e){t.minePercent=t.get(e,.15)}),e.$watch("cols",function(e){t.cols=t.get(e,t.DEFAULT_COLS),t.cols>t.MAX_COLS&&(t.cols=t.MAX_COLS)}),e.$watch("rows",function(e){t.rows=t.get(e,t.DEFAULT_ROWS),t.cols>t.MAX_ROWS&&(t.cols=t.MAX_ROWS),t.buildBoard()}),t.buildBoard=function(){t.cells=[],t.cellCount=t.cols*t.rows;for(var e=0;e<t.cellCount;e++){var l={hasFlag:!1};l.hasMine=Math.random()<=t.minePercent,l.isUnknown=!0;var c=e%t.cols,s=Math.floor(e/t.cols);l.col=c,l.row=s,0===c&&(t.cells[s]=[]),t.cells[s][c]=l}for(var n=0;n<t.rows;n++)for(var o=0;o<t.cols;o++)t.cells[n][o].touches=t.countTouches(t.cells[n][o])},t.click=function(e){e.isUnknown=!1},t.countTouches=function(e){var l=e.col,c=e.row,s=0;0!==l&&t.cells[c][l-1].hasMine&&s++;l+1!==t.cols&&t.cells[c][l+1].hasMine&&s++;0!==c&&t.cells[c-1][l].hasMine&&s++;c+1!==t.rows&&t.cells[c+1][l].hasMine&&s++;0!==l&&c+1!==t.rows&&t.cells[c+1][l-1].hasMine&&s++;l+1!==t.cols&&c+1!==t.rows&&t.cells[c+1][l+1].hasMine&&s++;0!==l&&0!==c&&t.cells[c-1][l-1].hasMine&&s++;l+1!==t.cols&&0!==c&&t.cells[c-1][l+1].hasMine&&s++;return s},t.get=function(e,l){var c=null;void 0===e&&void 0!==l&&(c=l);return c},t.reset=function(){},t.init=function(){t.reset()},t.init()}angular.module("minesweeper").controller("MinesweeperController",e),e.$inject=["$scope","MinesweeperService"]}(),function(){"use strict";angular.module("minesweeper").directive("minesweeper",function(){return{controller:"MinesweeperController",controllerAs:"ctrl",restrict:"E",scope:{cols:"=",minePercent:"=",rows:"="},template:"<div class=\"row\" data-ng-repeat=\"cols in ctrl.cells\"><div data-ng-repeat=\"cell in cols\" class=\"col cell\" data-ng-class=\"{ 'clear': !cell.isUnknown && !cell.hasMine && cell.touches === 0, 'mine': !cell.isUnknown && cell.hasMine, 'safe': !cell.isUnknown && !cell.hasMine && cell.touches !== 0, 'flag': cell.isUnknown && cell.hasFlag, 'unknown': cell.isUnknown && !cell.hasFlag, 'touches-0': cell.touches === 0, 'touches-1': cell.touches === 1, 'touches-2': cell.touches === 2, 'touches-3': cell.touches === 3, 'touches-4': cell.touches === 4, 'touches-5': cell.touches === 5, 'touches-6': cell.touches === 6, 'touches-7': cell.touches === 7, 'touches-8': cell.touches === 8 }\" data-ng-click=\"ctrl.click(cell)\">{{ cell.hasMine ? 'X' : cell.touches }}</div></div>"}})}();
//# sourceMappingURL=minesweeper.min.js.map
