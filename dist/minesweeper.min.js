!function(){"use strict";angular.module("minesweeper",[])}(),function(){"use strict";function e(){var e=this;return e.reset=function(){},e.reset(),e}angular.module("minesweeper").service("MinesweeperService",e),e.$inject=[]}(),function(){"use strict";function e(e,l){var s=this;s.DEFAULT_COLS=10,s.DEFAULT_ROWS=10,s.MIN_COLS=3,s.MIN_ROWS=3,s.MAX_COLS=48,s.MAX_ROWS=48,e.$watch("minePercent",function(e){s.minePercent=s.get(e,.15)}),e.$watch("cols",function(e){s.cols=s.get(e,s.DEFAULT_COLS),s.cols>s.MAX_COLS?s.cols=s.MAX_COLS:s.cols<s.MIN_COLS&&(s.cols=s.MIN_COLS)}),e.$watch("rows",function(e){s.rows=s.get(e,s.DEFAULT_ROWS),s.rows>s.MAX_ROWS?s.rows=s.MAX_ROWS:s.rows<s.MIN_ROWS&&(s.rows=s.MIN_ROWS),s.buildBoard()}),s.buildBoard=function(){s.cells=[],s.cellCount=s.cols*s.rows;for(var e=0;e<s.cellCount;e++){var l={hasFlag:!1};l.hasMine=Math.random()<=s.minePercent,l.isClear=!1;var o=e%s.cols,r=Math.floor(e/s.cols);l.col=o,l.row=r,0===o&&(s.cells[r]=[]),s.cells[r][o]=l}for(var t=0;t<s.rows;t++)for(var c=0;c<s.cols;c++)s.cells[t][c].touches=s.countTouches(s.cells[t][c])},s.checkEnd=function(){for(var e=0;e<s.rows;e++)for(var l=0;l<s.cols;l++)if(!s.cells[e][l].isClear){if(!s.cells[e][l].hasFlag)return!1;if(!s.cells[e][l].hasMine)return!1}return!0},s.clearNeighbors=function(e){for(var l=s.getNeighbors(e),o=l.length,r=0;r<o;r++){var t=l[r];t.isClear||t.hasMine||s.clearCell(t)}},s.clearCell=function(e){e.hasFlag||(e.isClear=!0,e.hasMine||0===e.touches&&s.clearNeighbors(e))},s.click=function(e,l){1===e.which?s.clearCell(l):3===e.which&&s.setFlag(l);s.checkEnd()&&alert("Good game.")},s.countTouches=function(e){for(var l=0,o=s.getNeighbors(e),r=o.length,t=0;t<r;t++){var c=o[t];c.hasMine&&l++}return l},s.get=function(e,l){var o=null;void 0===e&&void 0!==l&&(o=l);return o},s.getNeighbors=function(e){for(var l=[],o=["getNeighborBottom","getNeighborBottomLeft","getNeighborBottomRight","getNeighborLeft","getNeighborRight","getNeighborTop","getNeighborTopLeft","getNeighborTopRight"],r=o.length,t=0;t<r;t++){var c=o[t],n=s[c](e);null!==n&&l.push(n)}return l},s.getNeighborBottom=function(e){if(e.row+1!==s.rows)return s.cells[e.row+1][e.col];return null},s.getNeighborBottomLeft=function(e){if(0!==e.col&&e.row+1!==s.rows)return s.cells[e.row+1][e.col-1];return null},s.getNeighborBottomRight=function(e){if(e.col+1!==s.cols&&e.row+1!==s.rows)return s.cells[e.row+1][e.col+1];return null},s.getNeighborLeft=function(e){if(0!==e.col)return s.cells[e.row][e.col-1];return null},s.getNeighborRight=function(e){if(e.col+1!==s.cols)return s.cells[e.row][e.col+1];return null},s.getNeighborTop=function(e){if(0!==e.row)return s.cells[e.row-1][e.col];return null},s.getNeighborTopLeft=function(e){if(0!==e.col&&0!==e.row)return s.cells[e.row-1][e.col-1];return null},s.getNeighborTopRight=function(e){if(e.col+1!==s.cols&&0!==e.row)return s.cells[e.row-1][e.col+1];return null},s.setFlag=function(e){e.isClear||(e.hasFlag=!e.hasFlag)},s.reset=function(){},s.init=function(){s.reset()},s.init()}angular.module("minesweeper").controller("MinesweeperController",e),e.$inject=["$scope","MinesweeperService"]}(),function(){"use strict";angular.module("minesweeper").directive("minesweeper",function(){return{controller:"MinesweeperController",controllerAs:"ctrl",restrict:"E",scope:{cols:"=",minePercent:"=",rows:"="},template:"<div class=\"global-wrapper\"><div class=\"row no-gutters\" data-ng-repeat=\"cols in ctrl.cells\"><div data-ng-repeat=\"cell in cols\" class=\"col\" data-ng-class=\"{ 'clear': cell.isClear && !cell.hasMine && cell.touches === 0, 'mine': cell.isClear && cell.hasMine, 'safe': cell.isClear && !cell.hasMine && cell.touches !== 0, 'flag': !cell.isClear && cell.hasFlag, 'unknown': !cell.isClear && !cell.hasFlag, 'touches-0': cell.touches === 0, 'touches-1': cell.touches === 1, 'touches-2': cell.touches === 2, 'touches-3': cell.touches === 3, 'touches-4': cell.touches === 4, 'touches-5': cell.touches === 5, 'touches-6': cell.touches === 6, 'touches-7': cell.touches === 7, 'touches-8': cell.touches === 8 }\" data-ng-mousedown=\"ctrl.click($event, cell)\" oncontextmenu=\"return false\"><div class=\"dummy\"></div><div class=\"cell\"><div data-ng-if=\"!cell.isClear\">~</div><div data-ng-if=\"cell.isClear\">{{ cell.hasMine ? 'X' : cell.touches }}</div></div></div></div></div>"}})}();
//# sourceMappingURL=minesweeper.min.js.map
